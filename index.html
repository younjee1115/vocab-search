<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EDQUEEN Vocab Search</title>
<style>
  :root { --gap: 12px; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
  .wrap { max-width: 760px; margin: 0 auto; }
  h1 { margin: 0 0 10px; font-size: 22px; }
  .search { display: flex; gap: var(--gap); }
  input { flex: 1; padding: 12px 14px; border: 1px solid #ddd; border-radius: 12px; font-size: 16px; }
  .pill { font-size: 12px; padding: 2px 8px; border: 1px solid #eee; border-radius: 999px; margin-right: 6px; color: #555; }
  .card { border: 1px solid #eee; border-radius: 14px; padding: 12px 14px; margin-top: 10px; }
  .muted { color: #666; font-size: 13px; margin-top: 6px; }
  #count { margin-top: 10px; color: #555; font-size: 13px; }
</style>
<div class="wrap">
  <h1>üîç EDQUEEN Vocab Search</h1>
  <div class="search">
    <input id="q" placeholder="sustain / ÏùòÏãù / #Í≥†1 ‚Ä¶" />
  </div>
  <div id="count"></div>
  <div id="list"></div>
</div>

<script type="module">
import Fuse from "https://cdn.skypack.dev/fuse.js@6";

const data = await fetch("./data.json").then(r => r.json());
const fuse = new Fuse(data, {
  includeScore: false,
  threshold: 0.3,
  ignoreLocation: true,
  minMatchCharLength: 2,
  keys: ["word", "meaning", "synonyms", "antonyms", "tags"]
});

const q = document.getElementById("q");
const list = document.getElementById("list");
const count = document.getElementById("count");

function render(items){
  const arr = items[0]?.item ? items.map(x => x.item) : items;
  count.textContent = `${arr.length} results`;
  list.innerHTML = arr.slice(0,100).map(v => `
    <div class="card">
      <div><strong>${v.word||""}</strong> ${(v.pos||[]).map(p=>`<span class="pill">${p}</span>`).join("")}</div>
      <div>${v.meaning||""}</div>
      <div class="muted">
        ${v.synonyms?.length ? `syn: ${v.synonyms.join(", ")}` : ""}
        ${v.antonyms?.length ? ` &nbsp; ant: ${v.antonyms.join(", ")}` : ""}
      </div>
      <div style="margin-top:6px;">${(v.tags||[]).map(t=>`<span class="pill">${t}</span>`).join("")}</div>
    </div>
  `).join("");
}
render(data); // Ï¥àÍ∏∞ Ï†ÑÏ≤¥ Î™©Î°ù

let t;
q.addEventListener("input", e => {
  clearTimeout(t);
  t = setTimeout(() => {
    const s = e.target.value.trim();
    render(s ? fuse.search(s) : data);
  }, 150);
});
</script>
